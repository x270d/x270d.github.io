define(["jquery","ui"],function(a){!function(a){"use strict";a.widget("akado.autocompleteInput",{_create:function(){this._events(),this._checkLength()},_events:function(){var b=this;a.subscribe("autocomplete",function(a,c){var d=c.keyCode;if(40==d&&b.element.hasClass("_visible")){if(b.element.hasClass("_keyNav")){if(b.element.find("li").last().hasClass("_onfocus"))return;var e=b.element.find("._onfocus");e.removeClass("_onfocus").next("li").addClass("_onfocus")}else{var e=b.element.find("li").first();e.addClass("_onfocus"),b.element.addClass("_keyNav")}b._autocomplete(),b._scrollDown()}if(38==d&&b.element.hasClass("_visible")){if(!b.element.hasClass("_keyNav"))return;var e=b.element.find("._onfocus");if(b.element.find("li").first().hasClass("_onfocus"))return;e.removeClass("_onfocus").prev("li").addClass("_onfocus"),b._autocomplete(),b._scrollUp()}}),a.subscribe("selectHouse",function(){b._selectHouse()}),this._on({"click li":this._changeFocus})},_autocomplete:function(b){this.element.parent().find("input").attr("data-id",this.element.find("._onfocus").attr("data-id")),this.element.parent().find("input").val(this.element.find("._onfocus").text()),a.publish("checkForm")},_selectHouse:function(){this.element.find("._onfocus").trigger("click"),this.element.parent().find(".check-address__form-house_select").focus(),this.element.parent().find(".check-address__form-house_select").trigger("click")},_changeFocus:function(){this.element.hasClass("address__list-block")&&a.publish("changeFocus")},_checkLength:function(){},_scrollUp:function(){var a=this;this.element.find("li").removeClass("_outHeight"),this.element.find("li:nth-child(6n)").addClass("_outHeight"),this.element.find("._outHeight").last().addClass("_last");var b=a.element.find("._last").index()+1,c=a.element.find("li").length,d=c-b;a.element.find("._onfocus").hasClass("_outHeight")&&(a.element.find("._onfocus").hasClass("_last")&&d<6?a.element.scrollTop(a.element.scrollTop()-a.element.find("._onfocus").innerHeight()*d):a.element.scrollTop(a.element.scrollTop()-a.element.height()))},_scrollDown:function(){var a=this;if(this.element.find("li").removeClass("_outHeight"),this.element.find("li:nth-child(6n+1)").addClass("_outHeight"),this.element.find("._outHeight").last().addClass("_last"),a.element.find("._onfocus").hasClass("_outHeight")){if(a.element.find("li").first().hasClass("_onfocus")&&a.element.find("li").first().hasClass("_outHeight"))return;a.element.scrollTop(a.element.scrollTop()+a.element.height())}}})}(a)});